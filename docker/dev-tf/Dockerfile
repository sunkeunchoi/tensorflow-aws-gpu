FROM tensorflow/tensorflow:latest-devel-gpu-py3

MAINTAINER Sun Keun Choi <sunkeun.choi@gmail.com>

WORKDIR /tensorflow
ENV TF_NEED_CUDA 1
ENV TF_CUDA_COMPUTE_CAPABILITIES 3.7
ENV GCC_HOST_COMPILER_PATH /usr/bin/gcc
ENV TF_NEED_VERBS 0
ENV TF_NEED_GCP 0
ENV TF_NEED_HDFS 0
ENV TF_NEED_JEMALLOC 1
ENV TF_NEED_OPENCL 0
ENV TF_CUDA_CLANG 0
ENV TF_NEED_MKL 0
ENV TF_ENABLE_XLA 0
ENV PYTHON_BIN_PATH /usr/bin/python3
ENV PYTHON_LIB_PATH /usr/lib/python3/dist-packages
ENV TF_CUDA_VERSION $CUDA_VERSION
ENV TF_CUDNN_VERSION $CUDNN_VERSION
ENV CUDA_TOOLKIT_PATH /usr/local/cuda
ENV CUDNN_INSTALL_PATH /usr/local/cuda-8.0
ENV CUDNN_INSTALL_PATH /usr/lib/x86_64-linux-gnu
ENV LD_LIBRARY_PATH /usr/local/cuda/extras/CUPTI/lib64:$LD_LIBRARY_PATH
ENV CC_OPT_FLAGS '-march="broadwell"'
